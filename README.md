# 가상 발전소(VPP) AI 대화형 전략 어시스턴트

# 배경

- 재생에너지 실시간 입찰 시장의 개시
- 실시간 시장 입찰 원리 (시간 단위 등 세부 조건은 실제 정책 규모에서 프로젝트 규모로 조정)
    - 1구간의 3:00 ~ 3:03 동안 2구간에 대한 입찰 제안 제작
    - 2구간이 시작하는 3:15에 1구간에서 만든 입찰 제안의 결과 (accept, reject) 나옴
    - 2구간 때 하드웨어에서 흐르는 전기는 1구간 때 만든 입찰 제안의 결과가 반영


# 문제점

발전 사업자 입장에서 실시간으로 다양한 변수들을 고려한 채 빠르게 의사결정이 어려움 

<2024 6월 14일 SMP>

![image.png](vpp/readme 자료/image.png)

# 솔루션

대화형 자동화 가상 발전소 전략 어시스턴트

1. 발전소들의 상태를 읽어온다
2. 발전소 상태와 날씨, SMP 추이 등을 보고 입찰가를 15분 단위로 자동으로 생성한다
3. 사용자와 AI 에이전트가 입찰을 할지 말지 결정한다 
4. 입찰 성공/실패에 따라 발전소들의 상태를 바꾼다.

# 타겟 유저

| 항목 | 값 |
| --- | --- |
| 유저 유형  | 분산 발전 사업자 |
| 자원 포트폴리오 | 풍력 20kW, 태양광 30kW, ESS 15kWh |
| 목적 | 수익 극대화 + 출력손실 최소화 |

# 시스템 구조도

![image.png](vpp/readme 자료/image 1.png)

- <아두이노 세부 구조>
    
    ![image.png](vpp/readme 자료/image 2.png)
    
# 데이터 베이스 
[데이터 베이스 보기](backend/README.md#데이터베이스)


# LLM 프롬프트
[Open AI API 활용 방식 보기](backend/README.md#Open-API-활용)

# Rest API spec 
[Rest API Spec 보기](backend/README.md#Rest-API-설계)


# Task MM

<목표: 2주>

백엔드 2명 (10일) [박도희, 전인서, 신소희]

- PM과 함께 DB 아키텍트 최종 결정
- api 제작

AI 1명 (5일) [신소희]

- 단계별 프롬프트 제작
- 백엔드와 연결하여 “대화” 구현

하드웨어 1명 (5일) [김현서]

- 태양광, 풍력, 보조 배터리 회로 설계

프론트 1명 (4일) [전인서]

- 프론트 기획
- 15분마다 자동으로 대화 업데이트
- 유저 input 받아서 LLM에 넘겨주기 ("수정 없이 진행" 등)

PM [문지원]

- 총괄
- SMP 예측 데이터 조사

- 1단계: LLM 프롬프트 생성
    
    
    | 역할 | 주요 업무 내용 | 인일 | MM |
    | --- | --- | --- | --- |
    | PM + 전략 | - 사용자 시나리오 설계
    - 입찰 알고리즘 논리 설계
    - Prompt 설계 + flow chart | 7일  | 0.35 MM |
    | 백엔드 | - `/generate_bid`, `/get_ess` API 구현
    - SMP, ESS, 부하 DB 연동
    - 전략별 수락 로직 | 8일 | 0.40 MM |
    | 아두이노 | - ESS 릴레이/센서 구성
    - Serial 통신 처리
    - 행동 수행 명령 수신 | 6일 | 0.30 MM |
    | 프론트 (LLM) | - OpenAI API 연동
    - Tool mapping + LLM 응답 정제
    - CLI 또는 간단 웹 UI 구축 | 6일 | 0.30 MM |
    | 합계 |  | **27일** | **1.35 MM**  |
- 2단계: 입찰 로직 고도화, LLM과 같이 볼 대시보드 제작, 하드웨어 쪽 긴급 시나리오 테스트
    
    *긴급 시나리오란?
    
    - 태양광, 풍력, 충전소 측의 하드웨어적 문제 상황
    - 예를 들어, 태양광 패널 고장, 풍력 발전소 공사, 충전소 화재 위험 경보 등
        
        
        | 역할 | 주요 업무 내용 | 인일 | MM |
        | --- | --- | --- | --- |
        | PM + 전략 | -입찰 로직 고도화 
        - 하드웨어 긴급 시나리오  | 4일 | 0.20 MM |
        | 백엔드 | - 하드웨어 긴급 상황 대응 위한 API 행동 추가
        - 입찰 로직 고도화  | 4일 | 0.20 MM |
        | 아두이노 | - 하드웨어 위급 시나리오 구현 | 2일 | 0.10 MM |
        | 프론트 (대시보드 + LLM) | - 하드웨어 긴급 시나리오 프롬프트 추가  | 2일 | 0.10 MM |
        | 합계 |  | 12일  | **0.60 MM** |

# 제작 비용

### 발전 to 아두이노

풍력 발전

- 풍력 발전 모터 [https://m.robotscience.kr/goods/view?no=20588](https://m.robotscience.kr/goods/view?no=20588)

![image.png](vpp/readme 자료/image 4.png)

배터리 

- 보조배터리 1개 만mAh짜리 1개
